{
  "client_id": "16527ad2ca1349d59a90529a213e09a7",
  "prompt": {
    "6": {
      "inputs": {
        "text": "Remove the japanese text from this manga panel. Leave everything else unchanged!",
        "clip": [
          "38",
          0
        ]
      },
      "class_type": "CLIPTextEncode",
      "_meta": {
        "title": "CLIP Text Encode (Positive Prompt)"
      }
    },
    "8": {
      "inputs": {
        "samples": [
          "31",
          0
        ],
        "vae": [
          "39",
          0
        ]
      },
      "class_type": "VAEDecode",
      "_meta": {
        "title": "VAE Decode"
      }
    },
    "31": {
      "inputs": {
        "seed": 1036902081679045,
        "steps": 20,
        "cfg": 1,
        "sampler_name": "euler",
        "scheduler": "simple",
        "denoise": 1,
        "model": [
          "37",
          0
        ],
        "positive": [
          "35",
          0
        ],
        "negative": [
          "135",
          0
        ],
        "latent_image": [
          "124",
          0
        ]
      },
      "class_type": "KSampler",
      "_meta": {
        "title": "KSampler"
      }
    },
    "35": {
      "inputs": {
        "guidance": 2.5,
        "conditioning": [
          "177",
          0
        ]
      },
      "class_type": "FluxGuidance",
      "_meta": {
        "title": "FluxGuidance"
      }
    },
    "37": {
      "inputs": {
        "unet_name": "flux1-dev-kontext_fp8_scaled.safetensors",
        "weight_dtype": "default"
      },
      "class_type": "UNETLoader",
      "_meta": {
        "title": "Load Diffusion Model"
      }
    },
    "38": {
      "inputs": {
        "clip_name1": "clip_l.safetensors",
        "clip_name2": "t5xxl_fp8_e4m3fn_scaled.safetensors",
        "type": "flux",
        "device": "default"
      },
      "class_type": "DualCLIPLoader",
      "_meta": {
        "title": "DualCLIPLoader"
      }
    },
    "39": {
      "inputs": {
        "vae_name": "ae.safetensors"
      },
      "class_type": "VAELoader",
      "_meta": {
        "title": "Load VAE"
      }
    },
    "42": {
      "inputs": {
        "image": [
          "146",
          0
        ]
      },
      "class_type": "FluxKontextImageScale",
      "_meta": {
        "title": "FluxKontextImageScale"
      }
    },
    "124": {
      "inputs": {
        "pixels": [
          "42",
          0
        ],
        "vae": [
          "39",
          0
        ]
      },
      "class_type": "VAEEncode",
      "_meta": {
        "title": "VAE Encode"
      }
    },
    "135": {
      "inputs": {
        "conditioning": [
          "6",
          0
        ]
      },
      "class_type": "ConditioningZeroOut",
      "_meta": {
        "title": "ConditioningZeroOut"
      }
    },
    "146": {
      "inputs": {
        "direction": "right",
        "match_image_size": true,
        "spacing_width": 0,
        "spacing_color": "white",
        "image1": [
          "208",
          0
        ]
      },
      "class_type": "ImageStitch",
      "_meta": {
        "title": "Image Stitch"
      }
    },
    "173": {
      "inputs": {
        "images": [
          "42",
          0
        ]
      },
      "class_type": "PreviewImage",
      "_meta": {
        "title": "Preview Image"
      }
    },
    "177": {
      "inputs": {
        "conditioning": [
          "6",
          0
        ],
        "latent": [
          "124",
          0
        ]
      },
      "class_type": "ReferenceLatent",
      "_meta": {
        "title": "ReferenceLatent"
      }
    },
    "193": {
      "inputs": {
        "int": 1024
      },
      "class_type": "Primitive integer [Crystools]",
      "_meta": {
        "title": "width (must be 1024, 2048, or 4096)"
      }
    },
    "194": {
      "inputs": {
        "int": [
          "193",
          0
        ]
      },
      "class_type": "Primitive integer [Crystools]",
      "_meta": {
        "title": "height (you probably want to keep this as is)"
      }
    },
    "198": {
      "inputs": {
        "int": 565
      },
      "class_type": "Primitive integer [Crystools]",
      "_meta": {
        "title": "x"
      }
    },
    "199": {
      "inputs": {
        "int": 1235
      },
      "class_type": "Primitive integer [Crystools]",
      "_meta": {
        "title": "y"
      }
    },
    "201": {
      "inputs": {
        "x": [
          "198",
          0
        ],
        "y": [
          "199",
          0
        ],
        "resize_source": false,
        "destination": [
          "205",
          0
        ],
        "source": [
          "8",
          0
        ]
      },
      "class_type": "ImageCompositeMasked",
      "_meta": {
        "title": "ImageCompositeMasked"
      }
    },
    "205": {
      "inputs": {
        "width": [
          "206",
          0
        ],
        "height": [
          "206",
          1
        ],
        "batch_size": 1,
        "color": 16711935
      },
      "class_type": "EmptyImage",
      "_meta": {
        "title": "EmptyImage"
      }
    },
    "206": {
      "inputs": {
        "image": [
          "245",
          0
        ]
      },
      "class_type": "GetImageSize+",
      "_meta": {
        "title": "ğŸ”§ Get Image Size"
      }
    },
    "208": {
      "inputs": {
        "width": [
          "193",
          0
        ],
        "height": [
          "194",
          0
        ],
        "x": [
          "198",
          0
        ],
        "y": [
          "199",
          0
        ],
        "image": [
          "245",
          0
        ]
      },
      "class_type": "ImageCrop",
      "_meta": {
        "title": "Image Crop"
      }
    },
    "213": {
      "inputs": {
        "width": 2048,
        "height": 2048,
        "interpolation": "nearest",
        "method": "keep proportion",
        "condition": "always",
        "multiple_of": 0,
        "image": [
          "215",
          0
        ]
      },
      "class_type": "ImageResize+",
      "_meta": {
        "title": "ğŸ”§ Image Resize"
      }
    },
    "215": {
      "inputs": {
        "upscale_model": [
          "216",
          0
        ],
        "image": [
          "8",
          0
        ]
      },
      "class_type": "ImageUpscaleWithModel",
      "_meta": {
        "title": "Upscale Image (using Model)"
      }
    },
    "216": {
      "inputs": {
        "model_name": "ESRGAN_4x.pth"
      },
      "class_type": "UpscaleModelLoader",
      "_meta": {
        "title": "Load Upscale Model"
      }
    },
    "220": {
      "inputs": {
        "images": [
          "8",
          0
        ]
      },
      "class_type": "PreviewImage",
      "_meta": {
        "title": "Preview Image"
      }
    },
    "221": {
      "inputs": {
        "images": [
          "224",
          0
        ]
      },
      "class_type": "PreviewImage",
      "_meta": {
        "title": "Preview Image"
      }
    },
    "223": {
      "inputs": {
        "color": 16711935,
        "image": [
          "205",
          0
        ]
      },
      "class_type": "ImageColorToMask",
      "_meta": {
        "title": "ImageColorToMask"
      }
    },
    "224": {
      "inputs": {
        "x": [
          "198",
          0
        ],
        "y": [
          "199",
          0
        ],
        "resize_source": false,
        "destination": [
          "245",
          0
        ],
        "source": [
          "8",
          0
        ]
      },
      "class_type": "ImageCompositeMasked",
      "_meta": {
        "title": "ImageCompositeMasked"
      }
    },
    "226": {
      "inputs": {
        "invert": true,
        "red": 255,
        "green": 0,
        "blue": 255,
        "threshold": 1,
        "per_batch": 16,
        "images": [
          "201",
          0
        ]
      },
      "class_type": "ColorToMask",
      "_meta": {
        "title": "Color To Mask"
      }
    },
    "227": {
      "inputs": {
        "filename_prefix": "redraw_part",
        "images": [
          "201",
          0
        ],
        "mask": [
          "226",
          0
        ]
      },
      "class_type": "SaveImageWithAlpha",
      "_meta": {
        "title": "Save Image With Alpha"
      }
    },
    "238": {
      "inputs": {
        "value": [
          "215",
          0
        ]
      },
      "class_type": "ReroutePrimitive|pysssss",
      "_meta": {
        "title": "Reroute Primitive ğŸ"
      }
    },
    "245": {
      "inputs": {
        "image": "1 (1).png [output]",
        "refresh": "refresh"
      },
      "class_type": "LoadImageOutput",
      "_meta": {
        "title": "Load Image (from Outputs)"
      }
    }
  },
  "extra_data": {
    "extra_pnginfo": {
      "workflow": {
        "id": "f1f480ce-c47f-4b3d-a0d9-23561d58e35c",
        "revision": 0,
        "last_node_id": 245,
        "last_link_id": 391,
        "nodes": [
          {
            "id": 39,
            "type": "VAELoader",
            "pos": [
              -400,
              390
            ],
            "size": [
              337.76861572265625,
              58
            ],
            "flags": {},
            "order": 0,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "VAE",
                "type": "VAE",
                "links": [
                  61,
                  223
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "VAELoader",
              "cnr_id": "comfy-core",
              "ver": "0.3.38",
              "models": [
                {
                  "name": "ae.safetensors",
                  "url": "https://huggingface.co/Comfy-Org/Lumina_Image_2.0_Repackaged/resolve/main/split_files/vae/ae.safetensors",
                  "directory": "vae"
                }
              ]
            },
            "widgets_values": [
              "ae.safetensors"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 38,
            "type": "DualCLIPLoader",
            "pos": [
              -400,
              210
            ],
            "size": [
              337.76861572265625,
              130
            ],
            "flags": {},
            "order": 1,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  59
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "DualCLIPLoader",
              "cnr_id": "comfy-core",
              "ver": "0.3.38",
              "models": [
                {
                  "name": "clip_l.safetensors",
                  "url": "https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/clip_l.safetensors",
                  "directory": "text_encoders"
                },
                {
                  "name": "t5xxl_fp8_e4m3fn_scaled.safetensors",
                  "url": "https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp8_e4m3fn_scaled.safetensors",
                  "directory": "text_encoders"
                }
              ]
            },
            "widgets_values": [
              "clip_l.safetensors",
              "t5xxl_fp8_e4m3fn_scaled.safetensors",
              "flux",
              "default"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 135,
            "type": "ConditioningZeroOut",
            "pos": [
              250,
              200
            ],
            "size": [
              240,
              26
            ],
            "flags": {
              "collapsed": false
            },
            "order": 27,
            "mode": 0,
            "inputs": [
              {
                "name": "conditioning",
                "type": "CONDITIONING",
                "link": 237
              }
            ],
            "outputs": [
              {
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  238
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ConditioningZeroOut",
              "cnr_id": "comfy-core",
              "ver": "0.3.39"
            },
            "widgets_values": []
          },
          {
            "id": 173,
            "type": "PreviewImage",
            "pos": [
              320,
              860
            ],
            "size": [
              420,
              310
            ],
            "flags": {},
            "order": 37,
            "mode": 0,
            "inputs": [
              {
                "name": "images",
                "type": "IMAGE",
                "link": 289
              }
            ],
            "outputs": [],
            "properties": {
              "Node name for S&R": "PreviewImage",
              "cnr_id": "comfy-core",
              "ver": "0.3.40"
            },
            "widgets_values": []
          },
          {
            "id": 124,
            "type": "VAEEncode",
            "pos": [
              -20,
              400
            ],
            "size": [
              240,
              50
            ],
            "flags": {
              "collapsed": false
            },
            "order": 36,
            "mode": 0,
            "inputs": [
              {
                "name": "pixels",
                "type": "IMAGE",
                "link": 222
              },
              {
                "name": "vae",
                "type": "VAE",
                "link": 223
              }
            ],
            "outputs": [
              {
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  291,
                  293
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "VAEEncode",
              "cnr_id": "comfy-core",
              "ver": "0.3.39"
            },
            "widgets_values": []
          },
          {
            "id": 175,
            "type": "MarkdownNote",
            "pos": [
              -50,
              640
            ],
            "size": [
              320,
              88
            ],
            "flags": {},
            "order": 2,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "title": "About Flux Kontext Edit",
            "properties": {},
            "widgets_values": [
              "[English] Use Ctrl + B to enable multipule image input.\n\n[ä¸­æ–‡] ä½¿ç”¨ **Ctrl + B** æ¥å¯ç”¨å¤šå¼ å›¾ç‰‡è¾“å…¥"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 35,
            "type": "FluxGuidance",
            "pos": [
              250,
              90
            ],
            "size": [
              240,
              58
            ],
            "flags": {
              "collapsed": false
            },
            "order": 39,
            "mode": 0,
            "inputs": [
              {
                "name": "conditioning",
                "type": "CONDITIONING",
                "link": 292
              }
            ],
            "outputs": [
              {
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "slot_index": 0,
                "links": [
                  57
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "FluxGuidance",
              "cnr_id": "comfy-core",
              "ver": "0.3.38"
            },
            "widgets_values": [
              2.5
            ]
          },
          {
            "id": 185,
            "type": "MarkdownNote",
            "pos": [
              -960,
              490
            ],
            "size": [
              510,
              170
            ],
            "flags": {},
            "order": 3,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "title": "About VRAM",
            "properties": {},
            "widgets_values": [
              "For reference:\n- **fp8_scaled**: Requires about 20GB of VRAM.\n- **Original**: Requires about 32GB of VRAM.\n\n---\n\nä¾›å‚è€ƒï¼š\n-  **fp8_scaled** :  å¤§æ¦‚éœ€è¦ 20GB å·¦å³ VRAM \n- **åŸå§‹æƒé‡**:  åŸå§‹æƒé‡ï¼Œå¤§æ¦‚éœ€è¦ 32GB å·¦å³ VRAM \n"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 186,
            "type": "MarkdownNote",
            "pos": [
              -960,
              710
            ],
            "size": [
              510,
              170
            ],
            "flags": {},
            "order": 4,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "title": "Flux Kontext Prompt Techniques",
            "properties": {},
            "widgets_values": [
              "\n## Flux Kontext Prompt Techniques\n\n### 1. Basic Modifications\n- Simple and direct: `\"Change the car color to red\"`\n- Maintain style: `\"Change to daytime while maintaining the same style of the painting\"`\n\n### 2. Style Transfer\n**Principles:**\n- Clearly name style: `\"Transform to Bauhaus art style\"`\n- Describe characteristics: `\"Transform to oil painting with visible brushstrokes, thick paint texture\"`\n- Preserve composition: `\"Change to Bauhaus style while maintaining the original composition\"`\n\n### 3. Character Consistency\n**Framework:**\n- Specific description: `\"The woman with short black hair\"` instead of \"she\"\n- Preserve features: `\"while maintaining the same facial features, hairstyle, and expression\"`\n- Step-by-step modifications: Change background first, then actions\n\n### 4. Text Editing\n- Use quotes: `\"Replace 'joy' with 'BFL'\"`\n- Maintain format: `\"Replace text while maintaining the same font style\"`\n\n## Common Problem Solutions\n\n### Character Changes Too Much\nâŒ Wrong: `\"Transform the person into a Viking\"`\nâœ… Correct: `\"Change the clothes to be a viking warrior while preserving facial features\"`\n\n### Composition Position Changes\nâŒ Wrong: `\"Put him on a beach\"`\nâœ… Correct: `\"Change the background to a beach while keeping the person in the exact same position, scale, and pose\"`\n\n### Style Application Inaccuracy\nâŒ Wrong: `\"Make it a sketch\"`\nâœ… Correct: `\"Convert to pencil sketch with natural graphite lines, cross-hatching, and visible paper texture\"`\n\n## Core Principles\n\n1. **Be Specific and Clear** - Use precise descriptions, avoid vague terms\n2. **Step-by-step Editing** - Break complex modifications into multiple simple steps\n3. **Explicit Preservation** - State what should remain unchanged\n4. **Verb Selection** - Use \"change\", \"replace\" rather than \"transform\"\n\n## Best Practice Templates\n\n**Object Modification:**\n`\"Change [object] to [new state], keep [content to preserve] unchanged\"`\n\n**Style Transfer:**\n`\"Transform to [specific style], while maintaining [composition/character/other] unchanged\"`\n\n**Background Replacement:**\n`\"Change the background to [new background], keep the subject in the exact same position and pose\"`\n\n**Text Editing:**\n`\"Replace '[original text]' with '[new text]', maintain the same font style\"`\n\n> **Remember:** The more specific, the better. Kontext excels at understanding detailed instructions and maintaining consistency. "
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 187,
            "type": "MarkdownNote",
            "pos": [
              -960,
              930
            ],
            "size": [
              510,
              180
            ],
            "flags": {},
            "order": 5,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "title": "Flux Kontext æç¤ºè¯æŠ€å·§",
            "properties": {},
            "widgets_values": [
              "\n## Flux Kontext æç¤ºè¯æŠ€å·§\n\nä½¿ç”¨è‹±æ–‡\n\n### 1. åŸºç¡€ä¿®æ”¹\n- ç®€å•ç›´æ¥ï¼š`\"Change the car color to red\"`\n- ä¿æŒé£æ ¼ï¼š`\"Change to daytime while maintaining the same style of the painting\"`\n\n### 2. é£æ ¼è½¬æ¢\n**åŸåˆ™ï¼š**\n- æ˜ç¡®å‘½åé£æ ¼ï¼š`\"Transform to Bauhaus art style\"`\n- æè¿°ç‰¹å¾ï¼š`\"Transform to oil painting with visible brushstrokes, thick paint texture\"`\n- ä¿ç•™æ„å›¾ï¼š`\"Change to Bauhaus style while maintaining the original composition\"`\n\n### 3. è§’è‰²ä¸€è‡´æ€§\n**æ¡†æ¶ï¼š**\n- å…·ä½“æè¿°ï¼š`\"The woman with short black hair\"`è€Œé`\"å¥¹\"`\n- ä¿ç•™ç‰¹å¾ï¼š`\"while maintaining the same facial features, hairstyle, and expression\"`\n- åˆ†æ­¥ä¿®æ”¹ï¼šå…ˆæ”¹èƒŒæ™¯ï¼Œå†æ”¹åŠ¨ä½œ\n\n### 4. æ–‡æœ¬ç¼–è¾‘\n- ä½¿ç”¨å¼•å·ï¼š`\"Replace 'joy' with 'BFL'\"`\n- ä¿æŒæ ¼å¼ï¼š`\"Replace text while maintaining the same font style\"`\n\n## å¸¸è§é—®é¢˜è§£å†³\n\n### è§’è‰²å˜åŒ–è¿‡å¤§\nâŒ é”™è¯¯ï¼š`\"Transform the person into a Viking\"`\nâœ… æ­£ç¡®ï¼š`\"Change the clothes to be a viking warrior while preserving facial features\"`\n\n### æ„å›¾ä½ç½®æ”¹å˜\nâŒ é”™è¯¯ï¼š`\"Put him on a beach\"`\nâœ… æ­£ç¡®ï¼š`\"Change the background to a beach while keeping the person in the exact same position, scale, and pose\"`\n\n### é£æ ¼åº”ç”¨ä¸å‡†ç¡®\nâŒ é”™è¯¯ï¼š`\"Make it a sketch\"`\nâœ… æ­£ç¡®ï¼š`\"Convert to pencil sketch with natural graphite lines, cross-hatching, and visible paper texture\"`\n\n## æ ¸å¿ƒåŸåˆ™\n\n1. **å…·ä½“æ˜ç¡®** - ä½¿ç”¨ç²¾ç¡®æè¿°ï¼Œé¿å…æ¨¡ç³Šè¯æ±‡\n2. **åˆ†æ­¥ç¼–è¾‘** - å¤æ‚ä¿®æ”¹åˆ†ä¸ºå¤šä¸ªç®€å•æ­¥éª¤\n3. **æ˜ç¡®ä¿ç•™** - è¯´æ˜å“ªäº›è¦ä¿æŒä¸å˜\n4. **åŠ¨è¯é€‰æ‹©** - ç”¨\"æ›´æ”¹\"ã€\"æ›¿æ¢\"è€Œé\"è½¬æ¢\"\n\n## æœ€ä½³å®è·µæ¨¡æ¿\n\n**å¯¹è±¡ä¿®æ”¹ï¼š**\n`\"Change [object] to [new state], keep [content to preserve] unchanged\"`\n\n**é£æ ¼è½¬æ¢ï¼š**\n`\"Transform to [specific style], while maintaining [composition/character/other] unchanged\"`\n\n**èƒŒæ™¯æ›¿æ¢ï¼š**\n`\"Change the background to [new background], keep the subject in the exact same position and pose\"`\n\n**æ–‡æœ¬ç¼–è¾‘ï¼š**\n`\"Replace '[original text]' with '[new text]', maintain the same font style\"`\n\n> **è®°ä½ï¼š** è¶Šå…·ä½“è¶Šå¥½ï¼ŒKontext æ“…é•¿ç†è§£è¯¦ç»†æŒ‡ä»¤å¹¶ä¿æŒä¸€è‡´æ€§ã€‚"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 184,
            "type": "MarkdownNote",
            "pos": [
              -960,
              40
            ],
            "size": [
              510,
              400
            ],
            "flags": {},
            "order": 6,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "title": "Model links",
            "properties": {},
            "widgets_values": [
              "[tutorial](http://docs.comfy.org/tutorials/flux/flux-1-kontext-dev) | [æ•™ç¨‹](http://docs.comfy.org/zh-CN/tutorials/flux/flux-1-kontext-dev)\n\n**diffusion model**\n\n- [flux1-dev-kontext_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/flux1-kontext-dev_ComfyUI/resolve/main/split_files/diffusion_models/flux1-dev-kontext_fp8_scaled.safetensors)\n\n**vae**\n\n- [ae.safetensors](https://huggingface.co/Comfy-Org/Lumina_Image_2.0_Repackaged/blob/main/split_files/vae/ae.safetensors)\n\n**text encoder**\n\n- [clip_l.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/blob/main/clip_l.safetensors)\n- [t5xxl_fp16.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp16.safetensors) or [t5xxl_fp8_e4m3fn_scaled.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp8_e4m3fn_scaled.safetensors)\n\nModel Storage Location\n\n```\nğŸ“‚ ComfyUI/\nâ”œâ”€â”€ ğŸ“‚ models/\nâ”‚   â”œâ”€â”€ ğŸ“‚ diffusion_models/\nâ”‚   â”‚   â””â”€â”€ flux1-dev-kontext_fp8_scaled.safetensors\nâ”‚   â”œâ”€â”€ ğŸ“‚ vae/\nâ”‚   â”‚   â””â”€â”€ ae.safetensor\nâ”‚   â””â”€â”€ ğŸ“‚ text_encoders/\nâ”‚       â”œâ”€â”€ clip_l.safetensors\nâ”‚       â””â”€â”€ t5xxl_fp16.safetensors æˆ–è€… t5xxl_fp8_e4m3fn_scaled.safetensors\n```\n"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 180,
            "type": "MarkdownNote",
            "pos": [
              -1430,
              40
            ],
            "size": [
              450,
              450
            ],
            "flags": {},
            "order": 7,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "title": "âœ¨ New ComfyUI feature for Flux.1 Kontext Dev",
            "properties": {},
            "widgets_values": [
              "[English]\nWe have added an **Edit** button to the **Selection Toolbox** of the node for **FLUX.1 Kontext Image Edit** support. When clicked, it quickly adds a **FLUX.1 Kontext Image Edit** group node to the Latent output of your current workflow. This enables an interactive editing experience where you can:\n\n- Create multiple editing iterations, each preserved as a separate node\n- Easily branch off from any previous edit point to explore different creative directions\n- Return to any earlier version and start a new editing branch\n- Modify parameters in earlier nodes and automatically update all downstream edits\n- Execute or re-execute any branch of edits at any time\n\nThis workflow mirrors the iterative nature of LLM conversations, but with the added advantage of visual editing and the ability to maintain multiple parallel editing paths.\n\n---\n\n[ä¸­æ–‡]\næˆ‘ä»¬ä¸º **FLUX.1 Kontext Image Edit** çš„ç›¸å…³æ”¯æŒåœ¨èŠ‚ç‚¹çš„**é€‰æ‹©å·¥å…·ç®±**ä¸Šæ–°å¢äº†ä¸€ä¸ª**ç¼–è¾‘**æŒ‰é’®ã€‚ç‚¹å‡»åï¼Œç³»ç»Ÿä¼šåœ¨å½“å‰å·¥ä½œæµçš„ Latent è¾“å‡ºä¸Šå¿«é€Ÿæ·»åŠ ä¸€ä¸ª **FLUX.1 Kontext Image Edit** çš„ç»„èŠ‚ç‚¹ã€‚è¿™ç§è®¾è®¡å¸¦æ¥äº†çµæ´»çš„äº¤äº’å¼ç¼–è¾‘ä½“éªŒï¼š\n\n- åˆ›å»ºå¤šä¸ªç¼–è¾‘è¿­ä»£ï¼Œæ¯æ¬¡ç¼–è¾‘éƒ½ä¼šä¿å­˜ä¸ºç‹¬ç«‹èŠ‚ç‚¹\n- å¯ä»¥ä»ä»»ä½•ä¹‹å‰çš„ç¼–è¾‘ç‚¹åˆ†æ”¯å‡ºæ–°çš„åˆ›ä½œæ–¹å‘\n- éšæ—¶è¿”å›åˆ°æ—©æœŸç‰ˆæœ¬å¹¶å¼€å§‹æ–°çš„ç¼–è¾‘åˆ†æ”¯\n- ä¿®æ”¹æ—©æœŸèŠ‚ç‚¹çš„å‚æ•°ï¼Œè‡ªåŠ¨æ›´æ–°æ‰€æœ‰ä¸‹æ¸¸ç¼–è¾‘\n- å¯ä»¥éšæ—¶æ‰§è¡Œæˆ–é‡æ–°æ‰§è¡Œä»»ä½•ç¼–è¾‘åˆ†æ”¯\n\nè¿™ç§å·¥ä½œæµç¨‹ç±»ä¼¼äº LLM å¯¹è¯çš„è¿­ä»£ç‰¹æ€§ï¼Œä½†å¢åŠ äº†è§†è§‰ç¼–è¾‘çš„ä¼˜åŠ¿ï¼Œå¹¶èƒ½å¤Ÿç»´æŠ¤å¤šä¸ªå¹¶è¡Œçš„ç¼–è¾‘è·¯å¾„ã€‚"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 177,
            "type": "ReferenceLatent",
            "pos": [
              10,
              140
            ],
            "size": [
              197.712890625,
              46
            ],
            "flags": {},
            "order": 38,
            "mode": 0,
            "inputs": [
              {
                "name": "conditioning",
                "type": "CONDITIONING",
                "link": 294
              },
              {
                "name": "latent",
                "shape": 7,
                "type": "LATENT",
                "link": 293
              }
            ],
            "outputs": [
              {
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  292
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ReferenceLatent",
              "cnr_id": "comfy-core",
              "ver": "0.3.41"
            },
            "widgets_values": []
          },
          {
            "id": 178,
            "type": "MarkdownNote",
            "pos": [
              -30,
              -150
            ],
            "size": [
              540,
              150
            ],
            "flags": {},
            "order": 8,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "title": "About multiple images reference",
            "properties": {},
            "widgets_values": [
              "[English] In addition to using **Image Stitch** to combine two images at a time, you can also encode individual images, then concatenate multiple latent conditions using the **ReferenceLatent** node, thus achieving the purpose of referencing multiple images. You can use the **EmptySD3LatentImage** node on the right to connect to **KSamper** and customize the size of the **latent_image**.\n\n[ä¸­æ–‡] é™¤äº†ä½¿ç”¨ **Image Stitch** å°†ä¸¤ä¸ªä¸¤ä¸ªå›¾åƒæ‹¼åˆä¹‹å¤–ï¼Œä½ åŒæ ·å¯ä»¥å°†å•ç‹¬çš„å›¾åƒ encode ä¹‹åï¼Œå°†å¤šä¸ª latent æ¡ä»¶ä½¿ç”¨ **ReferenceLatent** èŠ‚ç‚¹ä¸²è”ï¼Œä»è€Œå®ç°å¤šå¼ å›¾åƒå‚è€ƒçš„ç›®çš„ã€‚å¯ä»¥ä½¿ç”¨å³è¾¹çš„ **EmptySD3LatentImage** èŠ‚ç‚¹è¿æ¥åˆ° **KSamper**æ¥è‡ªå®šä¹‰ **latent_image** çš„å°ºå¯¸"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 188,
            "type": "EmptySD3LatentImage",
            "pos": [
              530,
              -140
            ],
            "size": [
              310,
              106
            ],
            "flags": {},
            "order": 9,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "LATENT",
                "type": "LATENT",
                "links": null
              }
            ],
            "properties": {
              "Node name for S&R": "EmptySD3LatentImage",
              "cnr_id": "comfy-core",
              "ver": "0.3.41"
            },
            "widgets_values": [
              1024,
              1024,
              1
            ]
          },
          {
            "id": 37,
            "type": "UNETLoader",
            "pos": [
              -400,
              80
            ],
            "size": [
              337.76861572265625,
              82
            ],
            "flags": {},
            "order": 10,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  58
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "UNETLoader",
              "cnr_id": "comfy-core",
              "ver": "0.3.38",
              "models": [
                {
                  "name": "flux1-dev-kontext_fp8_scaled.safetensors",
                  "url": "https://huggingface.co/Comfy-Org/flux1-kontext-dev_ComfyUI/resolve/main/split_files/diffusion_models/flux1-dev-kontext_fp8_scaled.safetensors",
                  "directory": "diffusion_models"
                }
              ]
            },
            "widgets_values": [
              "flux1-dev-kontext_fp8_scaled.safetensors",
              "default"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 42,
            "type": "FluxKontextImageScale",
            "pos": [
              -44.05424499511719,
              565.5408935546875
            ],
            "size": [
              270,
              30
            ],
            "flags": {
              "collapsed": false
            },
            "order": 35,
            "mode": 0,
            "inputs": [
              {
                "name": "image",
                "type": "IMAGE",
                "link": 312
              }
            ],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  222,
                  289
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "FluxKontextImageScale",
              "cnr_id": "comfy-core",
              "ver": "0.3.38"
            },
            "widgets_values": []
          },
          {
            "id": 142,
            "type": "LoadImageOutput",
            "pos": [
              -387.02716064453125,
              774.4588623046875
            ],
            "size": [
              320,
              374
            ],
            "flags": {},
            "order": 11,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "links": []
              },
              {
                "name": "MASK",
                "type": "MASK",
                "links": null
              }
            ],
            "properties": {
              "Node name for S&R": "LoadImageOutput",
              "cnr_id": "comfy-core",
              "ver": "0.3.40"
            },
            "widgets_values": [
              "ComfyUI_01501_.png [output]",
              false,
              "refresh",
              "image"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 191,
            "type": "InvertMask",
            "pos": [
              -578.4451904296875,
              2558.83984375
            ],
            "size": [
              210,
              26
            ],
            "flags": {},
            "order": 24,
            "mode": 4,
            "inputs": [
              {
                "name": "mask",
                "type": "MASK",
                "link": 295
              }
            ],
            "outputs": [
              {
                "name": "MASK",
                "type": "MASK",
                "slot_index": 0,
                "links": [
                  296
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "InvertMask"
            },
            "widgets_values": []
          },
          {
            "id": 192,
            "type": "CropMask",
            "pos": [
              -210.93307495117188,
              2461.2236328125
            ],
            "size": [
              315,
              130
            ],
            "flags": {},
            "order": 28,
            "mode": 4,
            "inputs": [
              {
                "name": "mask",
                "type": "MASK",
                "link": 296
              },
              {
                "name": "x",
                "type": "INT",
                "widget": {
                  "name": "x"
                },
                "link": 297
              },
              {
                "name": "y",
                "type": "INT",
                "widget": {
                  "name": "y"
                },
                "link": 298
              },
              {
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 299
              },
              {
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 300
              }
            ],
            "outputs": [
              {
                "name": "MASK",
                "type": "MASK",
                "slot_index": 0,
                "links": [
                  301
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "CropMask"
            },
            "widgets_values": [
              0,
              0,
              512,
              512
            ]
          },
          {
            "id": 146,
            "type": "ImageStitch",
            "pos": [
              -390,
              570
            ],
            "size": [
              270,
              150
            ],
            "flags": {},
            "order": 32,
            "mode": 0,
            "inputs": [
              {
                "name": "image1",
                "type": "IMAGE",
                "link": 323
              },
              {
                "name": "image2",
                "shape": 7,
                "type": "IMAGE",
                "link": 337
              }
            ],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  312
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ImageStitch",
              "cnr_id": "comfy-core",
              "ver": "0.3.40"
            },
            "widgets_values": [
              "right",
              true,
              0,
              "white"
            ]
          },
          {
            "id": 147,
            "type": "LoadImageOutput",
            "pos": [
              -50,
              770
            ],
            "size": [
              320,
              374
            ],
            "flags": {},
            "order": 12,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  337
                ]
              },
              {
                "name": "MASK",
                "type": "MASK",
                "links": null
              }
            ],
            "properties": {
              "Node name for S&R": "LoadImageOutput",
              "cnr_id": "comfy-core",
              "ver": "0.3.40"
            },
            "widgets_values": [
              "ComfyUI_01501_.png [output]",
              false,
              "refresh",
              "image"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 216,
            "type": "UpscaleModelLoader",
            "pos": [
              568.24609375,
              358.45751953125
            ],
            "size": [
              270,
              58
            ],
            "flags": {},
            "order": 13,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "UPSCALE_MODEL",
                "type": "UPSCALE_MODEL",
                "links": [
                  344
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "UpscaleModelLoader"
            },
            "widgets_values": [
              "ESRGAN_4x.pth"
            ]
          },
          {
            "id": 220,
            "type": "PreviewImage",
            "pos": [
              1518.4779052734375,
              340.9419250488281
            ],
            "size": [
              693.6219482421875,
              677.97314453125
            ],
            "flags": {},
            "order": 50,
            "mode": 0,
            "inputs": [
              {
                "name": "images",
                "type": "IMAGE",
                "link": 355
              }
            ],
            "outputs": [],
            "properties": {
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 205,
            "type": "EmptyImage",
            "pos": [
              942.1261596679688,
              2455.627685546875
            ],
            "size": [
              315,
              130
            ],
            "flags": {},
            "order": 30,
            "mode": 0,
            "inputs": [
              {
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 309
              },
              {
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 310
              }
            ],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "slot_index": 0,
                "links": [
                  327,
                  359
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "EmptyImage"
            },
            "widgets_values": [
              512,
              512,
              1,
              16711935
            ]
          },
          {
            "id": 6,
            "type": "CLIPTextEncode",
            "pos": [
              329,
              560
            ],
            "size": [
              400,
              220
            ],
            "flags": {},
            "order": 23,
            "mode": 0,
            "inputs": [
              {
                "name": "clip",
                "type": "CLIP",
                "link": 59
              }
            ],
            "outputs": [
              {
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "slot_index": 0,
                "links": [
                  237,
                  294
                ]
              }
            ],
            "title": "CLIP Text Encode (Positive Prompt)",
            "properties": {
              "Node name for S&R": "CLIPTextEncode",
              "cnr_id": "comfy-core",
              "ver": "0.3.38"
            },
            "widgets_values": [
              "Remove the japanese text from this manga panel. Leave everything else unchanged!"
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 201,
            "type": "ImageCompositeMasked",
            "pos": [
              931.582275390625,
              2017.849365234375
            ],
            "size": [
              315,
              146
            ],
            "flags": {},
            "order": 49,
            "mode": 0,
            "inputs": [
              {
                "name": "destination",
                "type": "IMAGE",
                "link": 327
              },
              {
                "name": "source",
                "type": "IMAGE",
                "link": 342
              },
              {
                "name": "mask",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "name": "x",
                "type": "INT",
                "widget": {
                  "name": "x"
                },
                "link": 307
              },
              {
                "name": "y",
                "type": "INT",
                "widget": {
                  "name": "y"
                },
                "link": 308
              }
            ],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "slot_index": 0,
                "links": [
                  377,
                  378
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ImageCompositeMasked"
            },
            "widgets_values": [
              0,
              0,
              false
            ]
          },
          {
            "id": 227,
            "type": "SaveImageWithAlpha",
            "pos": [
              1852.91796875,
              1926.958984375
            ],
            "size": [
              639.1774291992188,
              607.25048828125
            ],
            "flags": {},
            "order": 55,
            "mode": 0,
            "inputs": [
              {
                "name": "images",
                "type": "IMAGE",
                "link": 378
              },
              {
                "name": "mask",
                "type": "MASK",
                "link": 379
              }
            ],
            "outputs": [],
            "properties": {
              "Node name for S&R": "SaveImageWithAlpha"
            },
            "widgets_values": [
              "redraw_part"
            ]
          },
          {
            "id": 31,
            "type": "KSampler",
            "pos": [
              530,
              40
            ],
            "size": [
              320,
              262
            ],
            "flags": {},
            "order": 40,
            "mode": 0,
            "inputs": [
              {
                "name": "model",
                "type": "MODEL",
                "link": 58
              },
              {
                "name": "positive",
                "type": "CONDITIONING",
                "link": 57
              },
              {
                "name": "negative",
                "type": "CONDITIONING",
                "link": 238
              },
              {
                "name": "latent_image",
                "type": "LATENT",
                "link": 291
              }
            ],
            "outputs": [
              {
                "name": "LATENT",
                "type": "LATENT",
                "slot_index": 0,
                "links": [
                  52
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "KSampler",
              "cnr_id": "comfy-core",
              "ver": "0.3.38"
            },
            "widgets_values": [
              1036902081679045,
              "randomize",
              20,
              1,
              "euler",
              "simple",
              1
            ]
          },
          {
            "id": 8,
            "type": "VAEDecode",
            "pos": [
              1020.7211303710938,
              427.2159118652344
            ],
            "size": [
              190,
              46
            ],
            "flags": {
              "collapsed": false
            },
            "order": 41,
            "mode": 0,
            "inputs": [
              {
                "name": "samples",
                "type": "LATENT",
                "link": 52
              },
              {
                "name": "vae",
                "type": "VAE",
                "link": 61
              }
            ],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "slot_index": 0,
                "links": [
                  345,
                  381
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "VAEDecode",
              "cnr_id": "comfy-core",
              "ver": "0.3.38"
            },
            "widgets_values": []
          },
          {
            "id": 215,
            "type": "ImageUpscaleWithModel",
            "pos": [
              854.2623291015625,
              539.2532958984375
            ],
            "size": [
              221.96665954589844,
              46
            ],
            "flags": {},
            "order": 42,
            "mode": 0,
            "inputs": [
              {
                "name": "upscale_model",
                "type": "UPSCALE_MODEL",
                "link": 344
              },
              {
                "name": "image",
                "type": "IMAGE",
                "link": 345
              }
            ],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  346,
                  382
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ImageUpscaleWithModel"
            },
            "widgets_values": []
          },
          {
            "id": 213,
            "type": "ImageResize+",
            "pos": [
              854.1707153320312,
              670.1179809570312
            ],
            "size": [
              270,
              218
            ],
            "flags": {},
            "order": 44,
            "mode": 0,
            "inputs": [
              {
                "name": "image",
                "type": "IMAGE",
                "link": 346
              }
            ],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  384
                ]
              },
              {
                "name": "width",
                "type": "INT",
                "links": null
              },
              {
                "name": "height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "Node name for S&R": "ImageResize+"
            },
            "widgets_values": [
              2048,
              2048,
              "nearest",
              "keep proportion",
              "always",
              0
            ]
          },
          {
            "id": 214,
            "type": "Reroute",
            "pos": [
              1283.5262451171875,
              1037.976318359375
            ],
            "size": [
              75,
              26
            ],
            "flags": {},
            "order": 46,
            "mode": 0,
            "inputs": [
              {
                "name": "",
                "type": "*",
                "link": 387
              }
            ],
            "outputs": [
              {
                "name": "",
                "type": "IMAGE",
                "links": [
                  341,
                  342,
                  355,
                  361
                ]
              }
            ],
            "properties": {
              "showOutputText": false,
              "horizontal": false
            }
          },
          {
            "id": 195,
            "type": "Reroute",
            "pos": [
              105.29399871826172,
              2599.6953125
            ],
            "size": [
              75,
              26
            ],
            "flags": {},
            "order": 31,
            "mode": 4,
            "inputs": [
              {
                "name": "",
                "type": "*",
                "link": 301
              }
            ],
            "outputs": [
              {
                "name": "",
                "type": "MASK",
                "links": [
                  302
                ]
              }
            ],
            "properties": {
              "showOutputText": false,
              "horizontal": false
            }
          },
          {
            "id": 200,
            "type": "ImageCompositeMasked",
            "pos": [
              197.55398559570312,
              2273.902099609375
            ],
            "size": [
              315,
              146
            ],
            "flags": {},
            "order": 48,
            "mode": 4,
            "inputs": [
              {
                "name": "destination",
                "type": "IMAGE",
                "link": 390
              },
              {
                "name": "source",
                "type": "IMAGE",
                "link": 341
              },
              {
                "name": "mask",
                "shape": 7,
                "type": "MASK",
                "link": 331
              },
              {
                "name": "x",
                "type": "INT",
                "widget": {
                  "name": "x"
                },
                "link": 304
              },
              {
                "name": "y",
                "type": "INT",
                "widget": {
                  "name": "y"
                },
                "link": 305
              }
            ],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "slot_index": 0,
                "links": [
                  353
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ImageCompositeMasked"
            },
            "widgets_values": [
              0,
              0,
              false
            ]
          },
          {
            "id": 196,
            "type": "GrowMask",
            "pos": [
              204.4407501220703,
              2495.93701171875
            ],
            "size": [
              315,
              82
            ],
            "flags": {},
            "order": 34,
            "mode": 4,
            "inputs": [
              {
                "name": "mask",
                "type": "MASK",
                "link": 302
              }
            ],
            "outputs": [
              {
                "name": "MASK",
                "type": "MASK",
                "slot_index": 0,
                "links": [
                  331
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "GrowMask"
            },
            "widgets_values": [
              20,
              false
            ]
          },
          {
            "id": 202,
            "type": "LoadImageMask",
            "pos": [
              -605.9532470703125,
              2187.194091796875
            ],
            "size": [
              315,
              318.0000305175781
            ],
            "flags": {},
            "order": 14,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "MASK",
                "type": "MASK",
                "slot_index": 0,
                "links": [
                  295
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "LoadImageMask"
            },
            "widgets_values": [
              "04.png",
              "alpha",
              "image"
            ]
          },
          {
            "id": 194,
            "type": "Primitive integer [Crystools]",
            "pos": [
              585.19482421875,
              1464.1881103515625
            ],
            "size": [
              369.76666259765625,
              59.116783142089844
            ],
            "flags": {},
            "order": 25,
            "mode": 0,
            "inputs": [
              {
                "name": "int",
                "type": "INT",
                "widget": {
                  "name": "int"
                },
                "link": 386
              }
            ],
            "outputs": [
              {
                "name": "int",
                "type": "INT",
                "slot_index": 0,
                "links": [
                  300,
                  319
                ]
              }
            ],
            "title": "height (you probably want to keep this as is)",
            "properties": {
              "Node name for S&R": "Primitive integer [Crystools]"
            },
            "widgets_values": [
              2048
            ]
          },
          {
            "id": 223,
            "type": "ImageColorToMask",
            "pos": [
              569.6267700195312,
              2313.695068359375
            ],
            "size": [
              270,
              58
            ],
            "flags": {},
            "order": 33,
            "mode": 0,
            "inputs": [
              {
                "name": "image",
                "type": "IMAGE",
                "link": 359
              }
            ],
            "outputs": [
              {
                "name": "MASK",
                "type": "MASK",
                "links": []
              }
            ],
            "properties": {
              "Node name for S&R": "ImageColorToMask"
            },
            "widgets_values": [
              16711935
            ]
          },
          {
            "id": 206,
            "type": "GetImageSize+",
            "pos": [
              632.8621215820312,
              2492.521728515625
            ],
            "size": [
              214.20001220703125,
              66
            ],
            "flags": {},
            "order": 26,
            "mode": 0,
            "inputs": [
              {
                "name": "image",
                "type": "IMAGE",
                "link": 388
              }
            ],
            "outputs": [
              {
                "name": "width",
                "type": "INT",
                "slot_index": 0,
                "links": [
                  309
                ]
              },
              {
                "name": "height",
                "type": "INT",
                "slot_index": 1,
                "links": [
                  310
                ]
              },
              {
                "name": "count",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "Node name for S&R": "GetImageSize+"
            },
            "widgets_values": []
          },
          {
            "id": 224,
            "type": "ImageCompositeMasked",
            "pos": [
              942.4827880859375,
              2256.685546875
            ],
            "size": [
              270,
              146
            ],
            "flags": {},
            "order": 51,
            "mode": 0,
            "inputs": [
              {
                "name": "destination",
                "type": "IMAGE",
                "link": 391
              },
              {
                "name": "source",
                "type": "IMAGE",
                "link": 361
              },
              {
                "name": "mask",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "name": "x",
                "type": "INT",
                "widget": {
                  "name": "x"
                },
                "link": 365
              },
              {
                "name": "y",
                "type": "INT",
                "widget": {
                  "name": "y"
                },
                "link": 366
              }
            ],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  370
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ImageCompositeMasked"
            },
            "widgets_values": [
              0,
              0,
              false
            ]
          },
          {
            "id": 219,
            "type": "PreviewImage",
            "pos": [
              -196.72972106933594,
              2729.084716796875
            ],
            "size": [
              697.1747436523438,
              651.3467407226562
            ],
            "flags": {},
            "order": 52,
            "mode": 4,
            "inputs": [
              {
                "name": "images",
                "type": "IMAGE",
                "link": 353
              }
            ],
            "outputs": [],
            "properties": {
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 241,
            "type": "Note",
            "pos": [
              769.3895874023438,
              919.9180297851562
            ],
            "size": [
              210,
              88
            ],
            "flags": {},
            "order": 15,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "properties": {},
            "widgets_values": [
              "if 1024"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 240,
            "type": "Note",
            "pos": [
              764.0165405273438,
              1051.536865234375
            ],
            "size": [
              210,
              88
            ],
            "flags": {},
            "order": 16,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "properties": {},
            "widgets_values": [
              "if 2048"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 242,
            "type": "Note",
            "pos": [
              760.3880004882812,
              1176.8402099609375
            ],
            "size": [
              210,
              88
            ],
            "flags": {},
            "order": 17,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "properties": {},
            "widgets_values": [
              "if 4096"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 239,
            "type": "Reroute",
            "pos": [
              1013.7659912109375,
              1079.436279296875
            ],
            "size": [
              75,
              26
            ],
            "flags": {},
            "order": 47,
            "mode": 0,
            "inputs": [
              {
                "name": "",
                "type": "*",
                "link": 384
              }
            ],
            "outputs": [
              {
                "name": "",
                "type": "IMAGE",
                "links": []
              }
            ],
            "properties": {
              "showOutputText": false,
              "horizontal": false
            }
          },
          {
            "id": 238,
            "type": "ReroutePrimitive|pysssss",
            "pos": [
              1013.0682373046875,
              1185.14404296875
            ],
            "size": [
              75,
              26
            ],
            "flags": {},
            "order": 45,
            "mode": 0,
            "inputs": [
              {
                "label": " ",
                "name": "value",
                "type": "*",
                "link": 382
              }
            ],
            "outputs": [
              {
                "label": "IMAGE",
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "properties": {
              "Node name for S&R": "ReroutePrimitive|pysssss"
            }
          },
          {
            "id": 243,
            "type": "Note",
            "pos": [
              1233.234130859375,
              934.4378051757812
            ],
            "size": [
              210,
              88
            ],
            "flags": {},
            "order": 18,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "properties": {},
            "widgets_values": [
              "...connect here"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 226,
            "type": "ColorToMask",
            "pos": [
              1405.884033203125,
              1949.12158203125
            ],
            "size": [
              368.062744140625,
              596.2203369140625
            ],
            "flags": {},
            "order": 53,
            "mode": 0,
            "inputs": [
              {
                "name": "images",
                "type": "IMAGE",
                "link": 377
              }
            ],
            "outputs": [
              {
                "name": "MASK",
                "type": "MASK",
                "links": [
                  379
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ColorToMask"
            },
            "widgets_values": [
              true,
              255,
              0,
              255,
              1,
              16
            ]
          },
          {
            "id": 208,
            "type": "ImageCrop",
            "pos": [
              87.06396484375,
              1960.515625
            ],
            "size": [
              315,
              130
            ],
            "flags": {},
            "order": 29,
            "mode": 0,
            "inputs": [
              {
                "name": "image",
                "type": "IMAGE",
                "link": 389
              },
              {
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 318
              },
              {
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 319
              },
              {
                "name": "x",
                "type": "INT",
                "widget": {
                  "name": "x"
                },
                "link": 320
              },
              {
                "name": "y",
                "type": "INT",
                "widget": {
                  "name": "y"
                },
                "link": 321
              }
            ],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "slot_index": 0,
                "links": [
                  323
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ImageCrop"
            },
            "widgets_values": [
              512,
              512,
              0,
              0
            ]
          },
          {
            "id": 193,
            "type": "Primitive integer [Crystools]",
            "pos": [
              589,
              1342
            ],
            "size": [
              368.60552978515625,
              58
            ],
            "flags": {},
            "order": 19,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "int",
                "type": "INT",
                "slot_index": 0,
                "links": [
                  299,
                  318,
                  386
                ]
              }
            ],
            "title": "width (must be 1024, 2048, or 4096)",
            "properties": {
              "Node name for S&R": "Primitive integer [Crystools]"
            },
            "widgets_values": [
              1024
            ]
          },
          {
            "id": 237,
            "type": "Reroute",
            "pos": [
              1021.0231323242188,
              945.2819213867188
            ],
            "size": [
              75,
              26
            ],
            "flags": {},
            "order": 43,
            "mode": 0,
            "inputs": [
              {
                "name": "",
                "type": "*",
                "link": 381
              }
            ],
            "outputs": [
              {
                "name": "",
                "type": "IMAGE",
                "links": [
                  387
                ]
              }
            ],
            "properties": {
              "showOutputText": false,
              "horizontal": false
            }
          },
          {
            "id": 198,
            "type": "Primitive integer [Crystools]",
            "pos": [
              236.31781005859375,
              1344.5904541015625
            ],
            "size": [
              315,
              58
            ],
            "flags": {},
            "order": 20,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "int",
                "type": "INT",
                "slot_index": 0,
                "links": [
                  297,
                  304,
                  307,
                  320,
                  365
                ]
              }
            ],
            "title": "x",
            "properties": {
              "Node name for S&R": "Primitive integer [Crystools]"
            },
            "widgets_values": [
              565
            ]
          },
          {
            "id": 199,
            "type": "Primitive integer [Crystools]",
            "pos": [
              236.08932495117188,
              1468.0467529296875
            ],
            "size": [
              315,
              58
            ],
            "flags": {},
            "order": 21,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "int",
                "type": "INT",
                "slot_index": 0,
                "links": [
                  298,
                  305,
                  308,
                  321,
                  366
                ]
              }
            ],
            "title": "y",
            "properties": {
              "Node name for S&R": "Primitive integer [Crystools]"
            },
            "widgets_values": [
              1235
            ]
          },
          {
            "id": 221,
            "type": "PreviewImage",
            "pos": [
              1421.266845703125,
              2696.66845703125
            ],
            "size": [
              710.595458984375,
              676.8627319335938
            ],
            "flags": {},
            "order": 54,
            "mode": 0,
            "inputs": [
              {
                "name": "images",
                "type": "IMAGE",
                "link": 370
              }
            ],
            "outputs": [],
            "properties": {
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 245,
            "type": "LoadImageOutput",
            "pos": [
              -584.161865234375,
              1341.617919921875
            ],
            "size": [
              274,
              362
            ],
            "flags": {},
            "order": 22,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  388,
                  389,
                  390,
                  391
                ]
              },
              {
                "name": "MASK",
                "type": "MASK",
                "links": null
              }
            ],
            "properties": {
              "Node name for S&R": "LoadImageOutput"
            },
            "widgets_values": [
              "1 (1).png [output]",
              false,
              "refresh",
              "image"
            ]
          }
        ],
        "links": [
          [
            52,
            31,
            0,
            8,
            0,
            "LATENT"
          ],
          [
            57,
            35,
            0,
            31,
            1,
            "CONDITIONING"
          ],
          [
            58,
            37,
            0,
            31,
            0,
            "MODEL"
          ],
          [
            59,
            38,
            0,
            6,
            0,
            "CLIP"
          ],
          [
            61,
            39,
            0,
            8,
            1,
            "VAE"
          ],
          [
            222,
            42,
            0,
            124,
            0,
            "IMAGE"
          ],
          [
            223,
            39,
            0,
            124,
            1,
            "VAE"
          ],
          [
            237,
            6,
            0,
            135,
            0,
            "CONDITIONING"
          ],
          [
            238,
            135,
            0,
            31,
            2,
            "CONDITIONING"
          ],
          [
            289,
            42,
            0,
            173,
            0,
            "IMAGE"
          ],
          [
            291,
            124,
            0,
            31,
            3,
            "LATENT"
          ],
          [
            292,
            177,
            0,
            35,
            0,
            "CONDITIONING"
          ],
          [
            293,
            124,
            0,
            177,
            1,
            "LATENT"
          ],
          [
            294,
            6,
            0,
            177,
            0,
            "CONDITIONING"
          ],
          [
            295,
            202,
            0,
            191,
            0,
            "MASK"
          ],
          [
            296,
            191,
            0,
            192,
            0,
            "MASK"
          ],
          [
            297,
            198,
            0,
            192,
            1,
            "INT"
          ],
          [
            298,
            199,
            0,
            192,
            2,
            "INT"
          ],
          [
            299,
            193,
            0,
            192,
            3,
            "INT"
          ],
          [
            300,
            194,
            0,
            192,
            4,
            "INT"
          ],
          [
            301,
            192,
            0,
            195,
            0,
            "*"
          ],
          [
            302,
            195,
            0,
            196,
            0,
            "MASK"
          ],
          [
            304,
            198,
            0,
            200,
            3,
            "INT"
          ],
          [
            305,
            199,
            0,
            200,
            4,
            "INT"
          ],
          [
            307,
            198,
            0,
            201,
            3,
            "INT"
          ],
          [
            308,
            199,
            0,
            201,
            4,
            "INT"
          ],
          [
            309,
            206,
            0,
            205,
            0,
            "INT"
          ],
          [
            310,
            206,
            1,
            205,
            1,
            "INT"
          ],
          [
            312,
            146,
            0,
            42,
            0,
            "IMAGE"
          ],
          [
            318,
            193,
            0,
            208,
            1,
            "INT"
          ],
          [
            319,
            194,
            0,
            208,
            2,
            "INT"
          ],
          [
            320,
            198,
            0,
            208,
            3,
            "INT"
          ],
          [
            321,
            199,
            0,
            208,
            4,
            "INT"
          ],
          [
            323,
            208,
            0,
            146,
            0,
            "IMAGE"
          ],
          [
            327,
            205,
            0,
            201,
            0,
            "IMAGE"
          ],
          [
            331,
            196,
            0,
            200,
            2,
            "MASK"
          ],
          [
            337,
            147,
            0,
            146,
            1,
            "IMAGE"
          ],
          [
            341,
            214,
            0,
            200,
            1,
            "IMAGE"
          ],
          [
            342,
            214,
            0,
            201,
            1,
            "IMAGE"
          ],
          [
            344,
            216,
            0,
            215,
            0,
            "UPSCALE_MODEL"
          ],
          [
            345,
            8,
            0,
            215,
            1,
            "IMAGE"
          ],
          [
            346,
            215,
            0,
            213,
            0,
            "IMAGE"
          ],
          [
            353,
            200,
            0,
            219,
            0,
            "IMAGE"
          ],
          [
            355,
            214,
            0,
            220,
            0,
            "IMAGE"
          ],
          [
            359,
            205,
            0,
            223,
            0,
            "IMAGE"
          ],
          [
            361,
            214,
            0,
            224,
            1,
            "IMAGE"
          ],
          [
            365,
            198,
            0,
            224,
            3,
            "INT"
          ],
          [
            366,
            199,
            0,
            224,
            4,
            "INT"
          ],
          [
            370,
            224,
            0,
            221,
            0,
            "IMAGE"
          ],
          [
            377,
            201,
            0,
            226,
            0,
            "IMAGE"
          ],
          [
            378,
            201,
            0,
            227,
            0,
            "IMAGE"
          ],
          [
            379,
            226,
            0,
            227,
            1,
            "MASK"
          ],
          [
            381,
            8,
            0,
            237,
            0,
            "*"
          ],
          [
            382,
            215,
            0,
            238,
            0,
            "*"
          ],
          [
            384,
            213,
            0,
            239,
            0,
            "*"
          ],
          [
            386,
            193,
            0,
            194,
            0,
            "INT"
          ],
          [
            387,
            237,
            0,
            214,
            0,
            "*"
          ],
          [
            388,
            245,
            0,
            206,
            0,
            "IMAGE"
          ],
          [
            389,
            245,
            0,
            208,
            0,
            "IMAGE"
          ],
          [
            390,
            245,
            0,
            200,
            0,
            "IMAGE"
          ],
          [
            391,
            245,
            0,
            224,
            0,
            "IMAGE"
          ]
        ],
        "groups": [
          {
            "id": 1,
            "title": "Step 1- Load models",
            "bounding": [
              -410,
              10,
              360,
              450
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 3,
            "title": "Step 2 - Upload images",
            "bounding": [
              -410,
              480,
              694.9237670898438,
              678.9847412109375
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 5,
            "title": "Step 3 - Prompt",
            "bounding": [
              310,
              480,
              430,
              330
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 6,
            "title": "Conditioning",
            "bounding": [
              -30,
              10,
              540,
              250
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 7,
            "title": "Inpainting",
            "bounding": [
              -627.5040893554688,
              1253.745361328125,
              1947.608154296875,
              1391.738525390625
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          }
        ],
        "config": {},
        "extra": {
          "ds": {
            "scale": 0.7627768444385488,
            "offset": [
              1021.6659854298881,
              -858.2319265411602
            ]
          },
          "frontendVersion": "1.23.4",
          "groupNodes": {},
          "VHS_latentpreview": false,
          "VHS_latentpreviewrate": 0,
          "VHS_MetadataImage": true,
          "VHS_KeepIntermediate": true,
          "node_versions": {
            "comfy-core": "0.3.43",
            "comfyui-kjnodes": "f7eb33abc80a2aded1b46dff0dd14d07856a7d50",
            "ComfyUI_essentials": "33ff89fd354d8ec3ab6affb605a79a931b445d99",
            "ComfyUI-Crystools": "72e2e9af4a6b9a58ca5d753cacff37ba1ff9bfa8",
            "comfyui-custom-scripts": "1.2.3"
          }
        },
        "version": 0.4
      }
    }
  }
}